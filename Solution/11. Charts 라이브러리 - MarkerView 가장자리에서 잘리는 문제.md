# 11. âœ… Charts ë¼ì´ë¸ŒëŸ¬ë¦¬ - MarkerView ê°€ì¥ìë¦¬ì—ì„œ ì˜ë¦¬ëŠ” ë¬¸ì œ

#### #Chart #Library  #UIKit 

## ğŸ¤” ë¬¸ì œ ì •ì˜
highlightIndicatorê°€ `ChartView`ì˜ ê°€ì¥ìë¦¬ì— ë‹¿ìœ¼ë©´ ì˜ë¦¬ëŠ” í˜„ìƒì´ ë°œìƒí•œë‹¤.   
ìœ„ì— dateLabelë„ í•¨ê»˜ ì˜ë¦¬ê³  ìˆëŠ”ë° í•´ê²°í•´ë³´ì.

<img width="300" src="https://user-images.githubusercontent.com/113565086/228992568-6941adf3-da65-4985-8b6d-6636d7771e75.gif">

<br>

## ğŸª“ ì‚½ì§ˆ ê¸°ë¡

### 1. clipsToBounds = false ì„¤ì • 
`clipsToBounds` ì˜ ê°’ì„ trueë¡œ ì„¤ì •í•˜ë©´ subViewê°€ ìì‹ ì˜ ë²”ìœ„ ë°–ì— ìˆë‹¤ë©´ ê·¸ ì˜ì—­ë§Œí¼ ì˜ë ¤ì„œ ë Œë”ë§ ë˜ê³ ,   
ë°˜ëŒ€ë¡œ falseë¡œ ì„¤ì •í•˜ë©´ subViewê°€ ì˜ì—­ ë°–ê¹Œì§€ ì „ë¶€ ë Œë”ë§ ëœë‹¤ê³  í•œë‹¤.   
ì‹¤í—˜ì„ ìœ„í•´ ì§ì ‘ ê°„ë‹¨í•œ ì˜ˆì œë¥¼ ë§Œë“¤ì–´ë´¤ë‹¤.

~~~swift
import UIKit

class ViewController: UIViewController {
    
    @IBOutlet weak var redView: UIView!
    @IBOutlet weak var greenView: UIView!
    
    override func viewDidLoad() {
        super.viewDidLoad()
        redView.clipsToBounds = // true or false
    }
}
~~~

- trueë¡œ ì„¤ì • : superViewì¸ redView ì•ˆì— greenViewê°€ ë“¤ì–´ê°

<img width="300" src="https://user-images.githubusercontent.com/113565086/228993217-c78ac844-5072-4b08-8900-bef041117ea4.png">

<br>

- falseë¡œ ì„¤ì • : superViewì¸ redView ë°–ê¹Œì§€ greenViewê°€ ë Œë”ë§ ë¨.

<img width="300" src="https://user-images.githubusercontent.com/113565086/228998796-6a12140e-3021-468b-b4ac-8148e816bf17.png">

<br>

ê·¸ë˜ì„œ ë¬¸ì œì˜ ì›ì¸ì¸ ê²ƒ ê°™ì€ ê³³ì— ì ìš©í•´ë´¤ìœ¼ë‚˜,,, ë™ì‘í•˜ì§€ ì•ŠëŠ”ë‹¤.   
ì•„ë¬´ë˜ë„ clipsToBoundsì˜ ë¬¸ì œëŠ” ì•„ë‹Œë“¯ ì‹¶ë‹¤.

~~~swift 
lazy var averagePriceChartView: LineChartView = {
    let view = LineChartView()
    view.clipsToBounds = false // ì—¬ê¸°!
    view.addSubview(priceMarkerView)
    return view
}()     
~~~

<br>

### 2. contextì˜ Xê°’ ì¡°ì •í•˜ê¸°
ì˜ë¦¬ëŠ” ê²ƒì„ í•´ê²°í•˜ì§€ ëª»í•œë‹¤ë©´, ì•„ì˜ˆ ì˜ë¦¬ì§€ ì•Šë„ë¡ MarkerView ìœ„ì¹˜ë¥¼ ì¡°ì •í•˜ëŠ” ê²ƒì€ ì–´ë–¨ê¹Œ?   
ì–‘ìª½ ë ì¼ì • ë²”ìœ„ ì´ìƒ ìŠ¤í¬ë¡¤ì´ ë˜ë©´ ë¼ë²¨ì˜ ìœ„ì¹˜ë¥¼ ìœ ë™ì ìœ¼ë¡œ ë°”ê¿”ì£¼ëŠ” ì½”ë“œë¥¼ ì‹¬ì–´ë´¤ë‹¤.   
MarkerView í´ë˜ìŠ¤ ë‚´ `draw` ë©”ì„œë“œì— ì‘ì„±í•´ì£¼ì—ˆë‹¤.

~~~swift
// MarkerView.swift

open func draw(context: CGContext, point: CGPoint)
{
    let offset = self.offsetForDrawing(atPoint: point)
    context.saveGState()
    
    // â­ï¸ ì˜ˆì™¸ ì²˜ë¦¬
    if point.x >= 300 { // 300 ì´ìƒìœ¼ë¡œ ì»¤ì§€ë©´ xì˜ contextë¥¼ -30
        context.translateBy(x: point.x + offset.x - 30, y: self.frame.size.height + 20)
    } else if point.x <= 50 { // 50 ì´í•˜ë¡œ ì‘ì•„ì§€ë©´ xì˜ contextë¥¼ +5
        context.translateBy(x: point.x + offset.x + 5, y: self.frame.size.height + 20)
    } else { // ê·¸ë ‡ì§€ ì•Šì€ ê²½ìš°ì—ëŠ” ì›ë˜ì™€ ë™ì¼í•˜ê²Œ
        context.translateBy(x: point.x + offset.x, y: self.frame.size.height + 20) // yì— +20ì„ í•¨ìœ¼ë¡œì¨ ìœ„ì˜ ë¼ë²¨ë„ ì˜ë¦¬ì§€ ì•Šê²Œ
    }

    NSUIGraphicsPushContext(context)
    self.nsuiLayer?.render(in: context)
    NSUIGraphicsPopContext()
    context.restoreGState()
}
~~~

<br>

## ğŸ˜ˆ ë¬¸ì œ í•´ê²°

ê²°ê³¼ëŠ” ë§Œì¡±ìŠ¤ëŸ½ê²Œ ë‚˜ì™”ë‹¤! ë¬¼ë¡  ìƒìˆ˜ë¡œ ê°’ì„ ì§€ì •í–ˆê¸° ë•Œë¬¸ì— ë¦¬íŒ©í† ë§ì€ í•„ìš”í•  ë“¯ ì‹¶ë‹¤.   
ë””ë°”ì´ìŠ¤ë³„ ê¸°ì¤€ê°’ì´ ë‹¤ë¥¼í…ë°, ì´ë¥¼ ê°€ë³€ì ìœ¼ë¡œ ì¡°ì •í•˜ëŠ” ë°©ë²•ì„ ì°¾ë“ , ìµœì†Œê°’ì„ ì§€ì •í•´ì•¼ í•  ê²ƒ ê°™ë‹¤.   
(ìš°ì„  ì‹¤í—˜ ê²°ê³¼ ë‹¤ë¥¸ ë””ë°”ì´ìŠ¤ì—ì„œë„ ì˜ ë‚˜ì˜¤ëŠ” ê²ƒ ê°™ì•„ í˜„ ì½”ë“œë¥¼ ìœ ì§€í•˜ê³ ì í•œë‹¤.)

<img width="300" src="https://user-images.githubusercontent.com/113565086/229004523-f3e2b07d-df5a-4dde-8ede-d8ea56115bcd.gif">

## ğŸª Obsidian Link
- [[5. Charts ë¼ì´ë¸ŒëŸ¬ë¦¬ - ìŠ¤í¬ë¡¤ ì‹œ í™”ë©´ ê¹¨ì§€ëŠ” ë¬¸ì œ]]
- [[12. Charts ë¼ì´ë¸ŒëŸ¬ë¦¬ - MarkerView ì´ì „ í´ë¦­ê°’ ì¶œë ¥ ë¬¸ì œ]]