# âœ… Charts ë¼ì´ë¸ŒëŸ¬ë¦¬ / MarkerView ì´ì „ í´ë¦­ê°’ ì¶œë ¥ ë¬¸ì œ

## ğŸ¤” ë¬¸ì œ ì •ì˜
MarkerViewì˜ ê°’ì´ í´ë¦­í•˜ê¸° ì´ì „ì˜ ì €ì¥ëœ ê°’ìœ¼ë¡œ ì¶œë ¥ë˜ëŠ” í˜„ìƒ.   
ì´ ë•Œë¬¸ì— í´ë¦­í•œ ê°’ì´ highlightIndicatorì˜ ìœ„ì¹˜ì™€ ë‹¤ë¥´ê²Œ ì¶œë ¥ëœë‹¤.   
+ì¶”ê°€ë¡œ ë¹ ë¥´ê²Œ ì´ë™ì‹œì—ë„ ê°’ì´ ì´ìƒí•˜ê²Œ ì¶œë ¥ëœë‹¤. (ìœ„ì™€ ê°™ì€ ì´ìœ  ë•Œë¬¸ì— ë°œìƒí•˜ëŠ” ê²ƒ ì•„ë‹ê¹Œ?)

<img width="300" src="https://user-images.githubusercontent.com/113565086/229030162-32d5a8fd-33be-45c5-ad42-a2d33417fb24.gif">

<br>

## ğŸª“ ì‚½ì§ˆ ê¸°ë¡

### 1. ë¡œê·¸ ì°ì–´ë³´ê¸°

`chartView`ê°€ ì„ íƒë˜ì—ˆì„ ë•Œ í˜¸ì¶œë˜ëŠ” Delegate ë©”ì„œë“œ `chartValueSelected(chartView:entry:highlight:)` ë¥¼ ì´ìš©í•´ ë¡œê·¸ë¥¼ ì°ì–´ë´¤ë‹¤.   

~~~swift
func chartValueSelected(_ chartView: ChartViewBase, entry: ChartDataEntry, highlight: Highlight) {
    let index = Int(entry.x)
    let data = dataManager.getReportData()
    
    print("entry: \(entry)")
    print("index: \(index)")
    print("----------------------------------")
    
    // ì°¨íŠ¸ switch
    switch chartView {
    
    // averagePriceChartView
    case myView.priceView.averagePriceChartView:
        let priceMarkerView = myView.priceView.priceMarkerView
        // index ê°’ì˜ ë°ì´í„°ë¥¼ êº¼ë‚´ì™€ Labelì— ì ìš©
        priceMarkerView.dateLabel.text = "\(data.intervalCurrentLabels[index])"
        priceMarkerView.priceLabel.text = "\(numberFormmatter(with: Int(data.intervalCurrentPrices[index])))"
        
    // default
    default:
        break
    }
}
~~~

<br>

Console ì°½ ì¶œë ¥ì²˜ëŸ¼ IndexëŠ” í´ë¦­í•˜ëŠ” ìˆœê°„ë§ˆë‹¤ ì œëŒ€ë¡œ ê°€ì ¸ì˜¤ê³  ìˆì—ˆë‹¤.   
ê·¸ëŸ°ë° ì´ìƒí•˜ê²Œë„ ì´ì „ì— ë¶ˆëŸ¬ì˜¨ Indexë¥¼ Labelë¡œ ì ìš©ì‹œí‚¤ê³  ìˆë‹¤,,,

<img width="300" src="https://user-images.githubusercontent.com/113565086/229030929-cdc5c038-145d-4eb1-9081-089053c02c91.png">

<br>

### 2. Property Observer ì¶”ê°€

ì§€ê¸ˆ ì„¤ì •í•˜ê³  ìˆëŠ” dateLabel, priceLabelì— í”„ë¡œí¼í‹° ì˜µì €ë²„ë¥¼ êµ¬í˜„ í›„       
Viewì— ë°˜ì˜ì‹œí‚¬ ìˆ˜ ìˆë„ë¡ `setNeedsDisplay()` ë©”ì„œë“œë¥¼ í˜¸ì¶œí•´ì¤¬ë‹¤.   
ê·¸ëŸ°ë° ë¬¸ì œëŠ” í”„ë¡œí¼í‹° ì˜µì €ë²„ ì¡°ì°¨ ê°’ì´ ë³€ê²½ë˜ëŠ”ë°ë„,,, ì‹¤í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤ ğŸ˜¢

~~~swift
var dateLabel: UILabel = {
    let label = UILabel()
    label.text = "ë‚ ì§œ"
    return label
}() {
    didSet {
        print("dateLabel didSet")
        setNeedsDisplay()
    }
}

// ê°’ì´ ë¶„ëª… ë°”ë€Œê³  ìˆëŠ”ë°ë„ í”„ë¡œí¼í‹° ì˜µì €ë²„ê°€ ì¶œë ¥ë˜ì§€ ì•ŠëŠ”ë‹¤!!!
~~~

<br>

### 3. ViewControllerì— MakerView ê°ì²´ ë§Œë“¤ê¸°
Viewë¥¼ ë¶„ë¦¬í•˜ê¸° ìœ„í•´ í•˜ìœ„ Viewì— MarkerViewë¥¼ addSubView í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì‚¬ìš©í–ˆì—ˆëŠ”ë°,   
í˜¹ì‹œ ë¬¸ì œê°€ ìˆì„ê¹Œ ì‹¶ì–´ `ViewControllerë¡œ ì˜®ê²¨ì™€ ì§ì ‘ viewì— ì¶”ê°€`í•´ì£¼ì—ˆë‹¤.   

<br>

## ğŸ˜ˆ ë¬¸ì œ í•´ê²°

ì—´ë°›ê²Œë„ ë¬¸ì œê°€ í•´ê²°ë˜ì—ˆë‹¤ ã…¡ã…¡ ì–‘ìª½ ëì˜ ê°’ë„ ì˜ ì¶œë ¥ë˜ëŠ” ëª¨ìŠµì´ë‹¤.       
ì •í™•í•œ ì´ìœ ëŠ” ì•„ì§ ì°¾ì§€ ëª»í–ˆì§€ë§Œ ì˜ˆìƒí•˜ê¸°ë¡œëŠ” ì•„ë§ˆ View ë¶„ë¦¬ ë•Œë¬¸ì¸ ê²ƒ ê°™ë‹¤.   
Viewë¥¼ ë¶„ë¦¬í•˜ë©´ì„œ ë§ˆì£¼í•˜ê²Œ ë˜ëŠ” ë¬¸ì œê°€ ì •ë§ ë§ì€ ê²ƒ ê°™ë‹¤.   
íŠ¹íˆ ì´ëŸ° ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•  ë•Œ ë”ìš± ê·¸ë ‡ë‹¤.

<img width="300" src="https://user-images.githubusercontent.com/113565086/229047421-025e761f-16a9-4e85-82e4-126fab7cb39f.gif">