# âœ… ë¡œë”©í™”ë©´ ì¶”ê°€í•˜ê¸°

#### #ê¸°ëŠ¥êµ¬í˜„ #UIActivityIndicatorView #UIKit 

## **ğŸ”** ì‘ì„± ëª©ì 

ë„¤íŠ¸ì›Œí‚¹ ì½”ë“œë¥¼ ì‘ì„±í•˜ë©° í•œê°€ì§€ ë¬¸ì œì— ë¶€ë”ªí˜”ë‹¤.   
ë°”ë¡œ ë²„íŠ¼ì„ ì—°ì†ìœ¼ë¡œ 2ë²ˆ ì´ìƒ ëˆŒë ¸ì„ ë•Œ ë„¤íŠ¸ì›Œí‚¹ì´ 2ë²ˆ ì´ìƒ ì‘ë™í•˜ê²Œ ë˜ë©´ì„œ   
`PushViewController`ê°€ ì—¬ëŸ¬ë²ˆ ì‘ë™í•˜ê±°ë‚˜, ë°ì´í„°ê°€ ì´ìƒí•˜ê²Œ ì¶œë ¥ë˜ëŠ” í˜„ìƒ ë“±ì´ë‹¤.   
ì´ë¥¼ ë§‰ê¸° ìœ„í•´ ì§ê´€ì ì´ë©´ì„œë„ ì‹œê°ì  í”¼ë“œë°±ë„ ì¤„ ìˆ˜ ìˆëŠ” ë¡œë”© í™”ë©´ì„ ì¶”ê°€í•˜ë ¤ í•œë‹¤.

<br>

## ğŸ“Œ ì ìš© ë°©ë²•

### 1. SceneDelegateì— íƒ€ì… í”„ë¡œí¼í‹° ë§Œë“¤ê¸°

`SceneDelegate`ì—ë‹¤ê°€ íƒ€ì… í”„ë¡œí¼í‹° `window`(ìµœìƒìœ„ ê°ì²´)ë¥¼ ë§Œë“¤ì–´ì¤€ë‹¤.   
ì•ìœ¼ë¡œ ì´ viewì—ë‹¤ê°€ ë¡œë”©í™”ë©´ì„ ì¶”ê°€í•  ê²ƒì´ë‹¤!

~~~swift
// SceneDelegate.swift
static var window: UIWindow?
~~~

<br>

### 2. LoadingView ì‹±ê¸€í†¤ìœ¼ë¡œ ë§Œë“¤ì–´ì£¼ê¸°

Loading í™”ë©´ìœ¼ë¡œ ì‚¬ìš©í•  í´ë˜ìŠ¤ë¥¼ ì‹±ê¸€í†¤ íŒ¨í„´ìœ¼ë¡œ ë§Œë“¤ì–´ì¤€ë‹¤.   
ì‹±ê¸€í†¤ìœ¼ë¡œ ë§Œë“œëŠ” ì´ìœ ëŠ” ì–´ë””ì„œë“  ë¡œë”©ì„ ì‰½ê²Œ í˜¸ì¶œ í•  ìˆ˜ ìˆê²Œ ë§Œë“¤ì–´ì£¼ê¸° ìœ„í•´ì„œë‹¤.

~~~swift
final class LoadingView: UIView() {
    // singleton
    static let shared = LoadingView()
    private init() {
        super.init(frame: .zero)
    }
}
~~~

<br>

### 3. contentView ì¶”ê°€

LoadingView ìœ„ì— ì‹¤ì œ ì»´í¬ë„ŒíŠ¸ë“¤ì„ ì˜¬ë¦´ contentViewë¥¼ ì¶”ê°€í•´ì¤€ë‹¤.

~~~swift
final class LoadingView: UIView() {

    // ìƒëµ!

    // contentView ì¶”ê°€í•´ì£¼ê¸°
    private let contentView: UIView = {
        let view = UIView()
        view.backgroundColor = .black.withAlphaComponent(0.2)
        view.translatesAutoresizingMaskIntoConstraints = false
        return view
    }()
}
~~~

<br>

### 4. UIActivityIndicatorView ì¶”ê°€

ë¡œë”©í™”ë©´ì„ í‘œì‹œí•˜ê¸° ìœ„í•œ `UIActivityIndicatorView`ë¥¼ ì¶”ê°€í•´ì¤€ë‹¤.   
ì• í”Œì´ ë§Œë“¤ì–´ë†“ì€ ê¸°ë³¸ì ì¸ ë¡œë”©í™”ë©´ìœ¼ë¡œ ì‚¬ìš©ë²•ë„ ë§¤ìš° ê°„ë‹¨í•˜ë‹¤!   
(ë©”ì„œë“œ ì´ë¦„ë§Œ ë´ë„ ë§¤ìš° ì§ê´€ì ì´ë‹¤.)   

- activityIndicatorView.startAnimating()
- activityIndicatorView.stopAnimating()
- activityIndicatorView.stopAnimating()

~~~swift
final class LoadingView: UIView() {

    // ìƒëµ!

    // UIActivityIndicatorView ìƒì„±
    private let activityIndicatorView: UIActivityIndicatorView = {
        let loading = UIActivityIndicatorView(style: .large) // í¬ê²Œ ë§Œë“¤ì–´ì¤„í…¨
        loading.translatesAutoresizingMaskIntoConstraints = false
        return loading
    }()
}
~~~

<br>

### 5. addSubView & Constraints ì„¤ì •

ì´ì œ ì°¨ê³¡ì°¨ê³¡ ì»´í¬ë„ŒíŠ¸ë“¤ì„ ìŒ“ëŠ”ë‹¤.

~~~swift
// addSubView
addSubview(contentView)
contentView.addSubview(activityIndicatorView)

// Constraints
NSLayoutConstraint.activate([
    // contentView
    contentView.topAnchor.constraint(equalTo: topAnchor),
    contentView.bottomAnchor.constraint(equalTo: bottomAnchor),
    contentView.leadingAnchor.constraint(equalTo: leadingAnchor),
    contentView.trailingAnchor.constraint(equalTo: trailingAnchor),
    
    // activityIndicatorView
    activityIndicatorView.centerXAnchor.constraint(equalTo: centerXAnchor),
    activityIndicatorView.centerYAnchor.constraint(equalTo: centerYAnchor),
])
~~~

<br>

### 6. Loading í™”ë©´ ì¶”ê°€í•´ì£¼ëŠ” ë©”ì„œë“œ ìƒì„±

ë¡œë”© ì‹œì‘, ì¢…ë£Œ ë‘ê°€ì§€ ë©”ì„œë“œë¥¼ ë§Œë“¤ì–´ì¤€ë‹¤.

~~~swift
func start() {
    // SceneDelegateì— LoadingView ì¶”ê°€
    SceneDelegate.window?.addSubview(self)

    // ë¡œë”© ì• ë‹ˆë©”ì´ì…˜ ì‹œì‘!
    activityIndicatorView.startAnimating()
    
    // superViewì— ë§ì¶°ì„œ ì œì•½ ê±¸ê¸°
    NSLayoutConstraint.activate([
        self.topAnchor.constraint(equalTo: superview!.topAnchor),
        self.bottomAnchor.constraint(equalTo: superview!.bottomAnchor),
        self.leadingAnchor.constraint(equalTo: superview!.leadingAnchor),
        self.trailingAnchor.constraint(equalTo: superview!.trailingAnchor),
    ])
    
    // ë ˆì´ì•„ì›ƒ ì¦‰ì‹œ ì—…ë°ì´íŠ¸
    self.layoutIfNeeded()
}

func stop() {
    // LoadingView ì‚­ì œ
    self.removeFromSuperview()
}
~~~

<br>

### 7. Loading í™”ë©´ ì¶”ê°€í•´ì£¼ëŠ” ë©”ì„œë“œ ìƒì„±

ë¡œë”© ì‹œì‘, ì¢…ë£Œ ë‘ê°€ì§€ ë©”ì„œë“œë¥¼ ë§Œë“¤ì–´ì¤€ë‹¤.   
ì´ì œ ìš”ê±¸ ë¡œë”©í™”ë©´ì„ ì“°ê³  ì‹¶ì€ ê³³ì— ì‚¬ìš©í•˜ë©´ ëœë‹¤!   
ì‹±ê¸€í†¤ì´ê¸° ë•Œë¬¸ì— `LoadingView.shared.start()` ìš”ëŸ°ì‹ìœ¼ë¡œ!

~~~swift
func start() {
    // SceneDelegateì— LoadingView ì¶”ê°€
    SceneDelegate.window?.addSubview(self)

    // ë¡œë”© ì• ë‹ˆë©”ì´ì…˜ ì‹œì‘!
    activityIndicatorView.startAnimating()
    
    // superViewì— ë§ì¶°ì„œ ì œì•½ ê±¸ê¸°
    NSLayoutConstraint.activate([
        self.topAnchor.constraint(equalTo: superview!.topAnchor),
        self.bottomAnchor.constraint(equalTo: superview!.bottomAnchor),
        self.leadingAnchor.constraint(equalTo: superview!.leadingAnchor),
        self.trailingAnchor.constraint(equalTo: superview!.trailingAnchor),
    ])
    
    // ë ˆì´ì•„ì›ƒ ì¦‰ì‹œ ì—…ë°ì´íŠ¸
    self.layoutIfNeeded()
}

func stop() {
    // LoadingView ì‚­ì œ
    self.removeFromSuperview()
}
~~~

<img width="300" src="https://user-images.githubusercontent.com/113565086/230577996-fff67b2f-3c7e-4de6-82c4-2323e5be87f5.png">

<br>

## ğŸ’Œ Ref.
- [jake-kimë‹˜ì˜ tistoty](https://ios-development.tistory.com/980)