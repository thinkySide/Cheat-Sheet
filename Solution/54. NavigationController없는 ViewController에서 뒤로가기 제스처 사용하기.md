# âœ… 54. NavigationControllerì—†ëŠ” ViewControllerì—ì„œ ë’¤ë¡œê°€ê¸° ì œìŠ¤ì²˜ ì‚¬ìš©í•˜ê¸°

#### #UINavigationController #Gesture #UIKit 

## ğŸ¤” ë¬¸ì œ ì •ì˜

DayBlock í”„ë¡œì íŠ¸ UX ê°œì„ ì„ ìœ„í•´, present ëœ í™”ë©´ì—ì„œë„ ë’¤ë¡œê°€ê¸° ì œìŠ¤ì²˜(NavigationControllerì—ì„œ ì‚¬ìš©í•˜ëŠ” ê·¸ ì™¼ìª½ ëì—ì„œ ì˜¤ë¥¸ìª½ìœ¼ë¡œ Pan í•  ë•Œ ì‘ë™í•˜ëŠ” ê·¸ê±°)ë¥¼ ì¶”ê°€í•˜ê¸°ë¡œ í–ˆë‹¤. ìš”ëŸ° í•˜ë‚˜í•˜ë‚˜ê°€ ì‚¬ìš©ì„±ì— í° ë„ì›€ì„ ì¤„ê±°ë‹¤!(ì§€ê¸ˆì€ ì™¼ìª½ ìƒë‹¨ì˜ Xë²„íŠ¼ì„ í†µí•´ì„œë§Œ dismiss ë˜ê¸° ë•Œë¬¸ì— ì¢€ ë¶ˆí¸í•œ ìƒí™©)

---
## ğŸª“ ì‚½ì§ˆ ê¸°ë¡

### 1. UIPanGestureRecognizer ì¶”ê°€í•˜ê¸°

ìš°ì„  ë‚´ê°€ ì‚¬ìš©í•  Viewì— ì œìŠ¤ì²˜ë¥¼ ì¶”ê°€í•´ì£¼ê¸° ìœ„í•´ `UIPanGestureRecognizer` ë¥¼ ì„¤ì •í•´ì¤¬ë‹¤. ì œìŠ¤ì²˜ì˜ ì´ë™ê±°ë¦¬ë¥¼ ê³„ì‚°í•´ 80ë³´ë‹¤ í¬ê²Œ ìŠ¤ì™€ì´í”„ ë˜ì—ˆë‹¤ë©´, dismiss í•˜ëŠ” ì½”ë“œë¥¼ ì¶”ê°€í•´ì¤¬ë‹¤. 

~~~swift
// ë¨¼ì € íŒ¬ ì œìŠ¤ì²˜ë¥¼ viewì— ì¶”ê°€í•´ì¤€ë‹¤.
private func setupBackPanGesture() {
    let panGesture = UIPanGestureRecognizer(target: self, action: #selector(handlePanGesture(_:)))
    view.addGestureRecognizer(panGesture)
}

// íŒ¬ ì œìŠ¤ì²˜ ì‹¤í–‰ ì‹œ ë™ì‘í•  ë©”ì„œë“œ
@objc func handlePanGesture(_ gesture: UIPanGestureRecognizer) {
    
    // 1. ì œìŠ¤ì²˜ì˜ ì´ë™ ê±°ë¦¬
    let translation = gesture.translation(in: nil).x
    
    // 2. ì œìŠ¤ì²˜ê°€ ì¢…ë£Œë˜ì—ˆë‹¤ë©´
    if gesture.state == .ended {
        
        // 3. ì œìŠ¤ì²˜ê°€ 80ë³´ë‹¤ í¬ê²Œ ìŠ¤ì™€ì´í”„ ë˜ì—ˆë‹¤ë©´
        if translation > 80 {
            self.dismiss(animated: true, completion: nil)
        }
    }
}
~~~

dismissëŠ” ì˜ëœë‹¤! í•˜ì§€ë§Œ ë¬¸ì œëŠ” ì‹œì‘ ì§€ì ê³¼ ìƒê´€ì—†ì´ ë¬´ì¡°ê±´ dismiss ëœë‹¤ëŠ” ê²ƒ,,, ìš°ë¦¬ê°€ ë³´í†µ ì•„ëŠ” NavigationControllerì˜ ë’¤ë¡œê°€ê¸° ì œìŠ¤ì²˜ëŠ” ì™¼ìª½ ëì—ì„œ ì‹œì‘í•˜ì§€ ì•ŠëŠ”ê°€?! ìš”ê±¸ í•œë²ˆ ìˆ˜ì •í•´ë³´ì.

<br>

### 2. ì œìŠ¤ì²˜ ì‹œì‘ ì§€ì  ì‹ë³„í•˜ê¸°

ì‹œì‘ ì§€ì  ì‹ë³„ì„ ìœ„í•´ `startX` ë³€ìˆ˜ë¥¼ í•˜ë‚˜ ë§Œë“¤ì—ˆë‹¤. ì œìŠ¤ì²˜ê°€ ì‹œì‘í•˜ëŠ” ì‹œì ì„ ê¸°ì¤€ìœ¼ë¡œ ì œìŠ¤ì²˜ë¥¼ í•´ë³´ë‹ˆ ì–´ëŠì •ë„(?)ëŠ” ì›í•˜ëŠ”ê²ƒì²˜ëŸ¼ êµ¬í˜„ì´ ë˜ê¸´ í•˜ëŠ”ë°,,, Pan Gestureì˜ íŠ¹ì„±ìƒ í„°ì¹˜ê°€ "ì‹œì‘" í•˜ëŠ” ì‹œì ë¶€í„° beganì´ ë˜ëŠ” ê²ƒì´ ì•„ë‹Œ, ì–´ëŠì •ë„ ì›€ì§ì´ê³  ë‚˜ì„œì•¼ began ë©”ì„œë“œê°€ í˜¸ì¶œë˜ê¸° ë•Œë¬¸ì— ì‹œì‘ ì§€ì ì„ ì •í™•íˆ íŠ¹ì •í•  ìˆ˜ ì—†ì—ˆë‹¤. ê·¸ë˜ì„œ ì‹¤ì œ ë””ë°”ì´ìŠ¤ë¡œ í…ŒìŠ¤íŠ¸í•´ë´¤ì„ ë•Œ, ì–´ì©”ë•ŒëŠ” ë™ì‘í•˜ê³  ì–´ë–¨ë•ŒëŠ” ë™ì‘ì„ ì•ˆí•˜ëŠ” ë‘¥ ê·¸ë¬ë‹¤,,,

~~~swift
// íŒ¬ ì œìŠ¤ì²˜ ì‹¤í–‰ ì‹œ ë™ì‘í•  ë©”ì„œë“œ
@objc func handlePanGesture(_ gesture: UIPanGestureRecognizer) {

	// viewë¥¼ ê¸°ì¤€ìœ¼ë¡œ xê°’ì„ êµ¬í•˜ëŠ” startX
	let startX = gesture.location(in: view).x
	if gesture.state == .began && startX > 20 { 
		print("ì™¼ìª½ì´ ì•„ë‹ˆì–ì•„! ë©”ì„œë“œ ì¢…ë£Œ!")
		return
	}
	
    let translation = gesture.translation(in: nil).x
    
    if gesture.state == .ended {
        if translation > 80 {
            self.dismiss(animated: true, completion: nil)
        }
    }
}
~~~
<br>

### 3. í„°ì¹˜ í•˜ëŠ” 'ìˆœê°„' ì¡ì•„ë‚´ê¸°

touchUpì´ ì•„ë‹Œ, í„°ì¹˜ë¥¼ í•˜ëŠ” ë°”ë¡œ ê·¸ ìˆœê°„!!!! xì˜ ìœ„ì¹˜ë¥¼ ì¡ì•„ë‚¼ ìˆ˜ ìˆìœ¼ë©´ ë‚´ê°€ ì›í•˜ëŠ” êµ¬í˜„ì„ í•  ìˆ˜ ìˆì„ ê²ƒì´ë‹¤. ì´ ë°©ë²•ì„ ì¼ë°˜ì ì¸ `UITapGestureRecognizer`ë¡œëŠ” ì¡ê¸° ì–´ë µê³ , `UILongPressGestureRecognizer`ë¥¼ ì¡ì„ ìˆ˜ ìˆë‹¤ê³  í•œë‹¤. (chatGPTì•¼ ê³ ë§ˆì›Œ) ì–´ë–»ê²Œ ì¡ëŠ” ê²ƒì¸ê°€? ë°”ë¡œ `minimumPressDuration` ì„¤ì •ì„ í†µí•´ ì¡ì„ ìˆ˜ ìˆë‹¤ ã…ã… ìš” ê°’ì„ 0ìœ¼ë¡œ ë‘ê²Œ ë˜ë©´ í„°ì¹˜í•˜ëŠ” ì¦‰ì‹œ í˜¸ì¶œë˜ê¸° ë•Œë¬¸ì— ë‚´ê°€ ì›í•˜ëŠ” Xê°’ì„ ì´ë•Œ ì¡ì„ ìˆ˜ ìˆëŠ” ê²ƒ!!!

~~~swift
// ì´ˆê¸° Xê°’ì„ ì €ì¥í•˜ê¸° ìœ„í•œ ì „ì—­ ë³€ìˆ˜
var initialX: CGFloat = 0

private func setupBackPanGesture() {
    
    // í™”ë©´ì„ í„°ì¹˜í•˜ìë§ˆì ë°˜ì‘í•˜ëŠ” ì œìŠ¤ì²˜ ì¶”ê°€
    let pressGesture = UILongPressGestureRecognizer(target: self, action: #selector(handlePressGesture(_:)))
    pressGesture.minimumPressDuration = 0 // â­ï¸â­ï¸â­ï¸ ìš”ê²Œ í•µì‹¬ì´ë‹¤!!!!
    view.addGestureRecognizer(pressGesture)
    
    // ì•„ê¹Œ ì¶”ê°€í–ˆë˜ íŒ¬ ì œìŠ¤ì²˜
    let panGesture = UIPanGestureRecognizer(target: self, action: #selector(handlePanGesture(_:)))
    view.addGestureRecognizer(panGesture)
}

/// ê·¸ë¦¬ê³  ì´ ë•Œ ë”±! xê°’ì„ ì¡ì•„ì£¼ëŠ” ê±°ë‹¤.
@objc func handlePressGesture(_ gesture: UILongPressGestureRecognizer) {
    if gesture.state == .began {
        initialX = gesture.location(in: view).x
    }
}

/// ì œìŠ¤ì²˜ê°€ ë™ì‘í• ë•Œ ì‹¤í–‰í•  ë©”ì„œë“œ
@objc func handlePanGesture(_ gesture: UIPanGestureRecognizer) {
    
    // 1. ì œìŠ¤ì²˜ì˜ ì´ë™ ê±°ë¦¬
    let translation = gesture.translation(in: nil).x
    
    // 2. ì œìŠ¤ì²˜ê°€ ì¢…ë£Œë˜ì—ˆë‹¤ë©´
    if gesture.state == .ended {

		// ì‹œì‘ ì§€ì ì´ 24 ì´í•˜ë¼ë©´(ëŒ€ì¶©) ì™¼ìª½ì´ ì•„ë‹ˆë¼ê³  ë³´ê³  ë©”ì„œë“œ ì¢…ë£Œ
        if initialX > 24 {
            print("ì™¼ìª½ì´ ì•„ë‹ˆì–ì•„! ë©”ì„œë“œ ì¢…ë£Œ!")
            return
        }
        
        // 3. ì œìŠ¤ì²˜ê°€ 100ë³´ë‹¤ í¬ê²Œ ìŠ¤ì™€ì´í”„ ë˜ì—ˆë‹¤ë©´
        if translation > 80 {
            self.dismiss(animated: true, completion: nil)
        }
    }
}
~~~

ê±°ì˜ ë‹¤ ì™”ë‹¤,,, ê·¸ëŸ°ë°??? ì™œ ìƒˆë¡œ ì¶”ê°€í•œ `LongPressGesture` ëŠ” ì˜ ë¨¹íˆëŠ”ë° ì•„ê¹Œ ì¶”ê°€í•´ë†¨ë˜ `TapGesture` ê°€ ì•ˆë¨¹íˆì§•? ì œìŠ¤ì²˜ë¥¼ ë‘ê°œ ì¶”ê°€í•  ìˆ˜ëŠ” ì—†ëŠ” ê±¸ê¹Œ?

---
## ğŸ˜ˆ ë¬¸ì œ í•´ê²°

ë˜ ê²€ìƒ‰ì„ ì´ê²ƒì €ê²ƒ í•´ë³´ë‹ˆ `UIGestureRecognizerDelegate` ë¼ëŠ” ê±¸ ì¶”ê°€í•´ `shouldRecognizeSimultaneouslyWith` ìš” Delegate ë©”ì„œë“œë¥¼ ì¶”ê°€í•´ì¤Œìœ¼ë¡œì¨ ì œìŠ¤ì²˜ ë‘ê°œë¥¼ í™œìš©í•  ìˆ˜ ìˆë‹¤ê³  í•œë‹¤. ë§ˆì§€ë§‰ìœ¼ë¡œ ì¶”ê°€~

~~~swift
extension CreateGroupViewController: UIGestureRecognizerDelegate {
    
    /// ìŠ¤ì™€ì´í”„ ì œìŠ¤ì²˜ë¥¼ ì´ìš©í•œ Dismiss ê¸°ëŠ¥ êµ¬í˜„ ë©”ì„œë“œ
    private func setupBackPanGesture() {
        
        // í™”ë©´ì„ í„°ì¹˜í•˜ìë§ˆì ë°˜ì‘í•˜ëŠ” ì œìŠ¤ì²˜ ì¶”ê°€
        let pressGesture = UILongPressGestureRecognizer(target: self, action: #selector(handlePressGesture(_:)))
        pressGesture.minimumPressDuration = 0
        pressGesture.delegate = self // â­ï¸ ë¸ë¦¬ê²Œì´íŠ¸ ìœ„ì„ì€ ìŠì§€ ë§ê¸°!
        view.addGestureRecognizer(pressGesture)

        // íŒ¬ ì œìŠ¤ì²˜ ì¶”ê°€
        let panGesture = UIPanGestureRecognizer(target: self, action: #selector(handlePanGesture(_:)))
        panGesture.delegate = self // â­ï¸ ë¸ë¦¬ê²Œì´íŠ¸ ìœ„ì„ì€ ìŠì§€ ë§ê¸°!
        view.addGestureRecognizer(panGesture)
    }
    
    @objc func handlePressGesture(_ gesture: UILongPressGestureRecognizer) {
        if gesture.state == .began {
            initialX = gesture.location(in: view).x
            print(initialX)
        }
    }
    
    /// ì œìŠ¤ì²˜ê°€ ë™ì‘í• ë•Œ ì‹¤í–‰í•  ë©”ì„œë“œ
    @objc func handlePanGesture(_ gesture: UIPanGestureRecognizer) {
        
        // 1. ì œìŠ¤ì²˜ì˜ ì´ë™ ê±°ë¦¬
        let translation = gesture.translation(in: nil).x
        
        // 2. ì œìŠ¤ì²˜ê°€ ì¢…ë£Œë˜ì—ˆë‹¤ë©´
        if gesture.state == .ended {
            
            if initialX > 24 {
                print("ì¢…ë£Œ")
                return
            }
            
            // 3. ì œìŠ¤ì²˜ê°€ 100ë³´ë‹¤ í¬ê²Œ ìŠ¤ì™€ì´í”„ ë˜ì—ˆë‹¤ë©´
            if translation > 80 {
                self.dismiss(animated: true, completion: nil)
            }
        }
    }
    
    /// â­ï¸ ì œìŠ¤ì²˜ê°€ ë™ì‹œì— ì‹¤í–‰ì´ ê°€ëŠ¥í•˜ë„ë¡ ë§Œë“œëŠ” Delegate ë©”ì„œë“œ
    func gestureRecognizer(_ gestureRecognizer: UIGestureRecognizer, shouldRecognizeSimultaneouslyWith otherGestureRecognizer: UIGestureRecognizer) -> Bool {
        return true
    }
}
~~~

---
## ğŸ’Œ Ref.
- 

---
## ğŸª Obsidian Link
- 